<%= turbo_stream_from comment, :comments %>
<div class = "pl-3" id = "<%= dom_id(comment)%>_with_comments" data-controller = "comment-reply">
  <%= render comment %>

  <div class= "text-sm">
    <%= link_to 'Reply', '#', data: { action: "click->comment-reply#toggle" ,turbo: true} %>
  </div>

  <div id = "<%=dom_id(comment)%>_comments"%>
    <%= render partial: "comments/form", locals: {parent_id: comment.id ,post: comment.post, comment: Comment.new, data: { comment_reply_target: "form", turbo: true }, class: "d-none"} %>
    <%= render partial: "comments/comment_with_replies", collection: comment.replies, as: :comment%>
  </div>
</div>
